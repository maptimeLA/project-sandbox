<!DOCTYPE html>
<html>
<head>
	<title>Map of Los Angeles City Council Districts</title>
	<meta charset="utf-8" />
	<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no' />
    <script src="http://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.js"></script>
    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.css" />
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>

</head>
<body>
    <div id="info"><h1>Map of Los Angeles City Council Districts</h1></div>
	<div id="map"></div>

	<script>
    var map = L.map('map')
    .setView([34.052234,-118.243685], 11);


    //Code to add Basemaps
    var stamentiles = L.tileLayer('http://{s}.tile.stamen.com/toner-lite/{z}/{x}/{y}.png').addTo(map);

    //Create locations for geojson
    var lacity="data/lacity_boundary.geojson";
    var lacitycd="data/lacity_council.geojson";
    var lacityparcels="data/council_district_parcels.geojson";

    //Styles and loads the LA City Boundary
    $.getJSON(lacity, function(data) {
      var lacityLayer = L.geoJson(data, {
        style:{
          fillColor:"aqua",
          color: "#000",
          weight: 0,
          opacity: 0,
          fillOpacity: 0.2
        }
      }).addTo(map);
    });

    //We'll build up from the districts GeoJSON
    var districtNames = { null: "None" }

    //Styles and loads the Council Districts
    $.getJSON(lacitycd, function(data) {
      var councilDistrictsLayer = L.geoJson(data, {
        style:{
          fillColor:"#ff78b4",
          color: "#FFF",
          weight: 1,
          fillOpacity: 0.8
        },
        onEachFeature: function (feature, layer) {
          var districtName = feature.properties.Dist_Name
          districtNames[feature.properties.District] = districtName;
          layer.bindPopup("Council District: " + districtName);
        }
      }).addTo(map);
    });

    //Styles and loads LA City Parcels
    $.getJSON(lacityparcels, function(data) {
      var parcelLayer = L.geoJson(data, {
        style:{
          fillColor:"green",
          color: "#FFF",
          weight: 1,
          fillOpacity: 0.8
        },
        onEachFeature: function (feature, layer) {
          var district = feature.properties.District;
          var districtName = (districtNames[district] || "Unknown");
          layer.bindPopup("Council District: " + districtName);
        }
      }).addTo(map);
    });
	</script>
</body>
</html>
